# DA-Power-BI-project_Creation-of-a-strategic-map-on-API-requests-data
Creation of a strategic map with the places with the largest concentration of children, as well as the location of current billboards in Moscow
Создание стратегической карты с указанием мест наибольшего скопления детей, а также расположения актуальных рекламных щитов в Москве</br></br>

**Формализация задачи**
a) Сделать стратегическую карту, на которой указаны места с наибольшим скоплением детей, а также расположение текущих билбордов в Москве.
b) Вывести рейтинг каждой точки с возможностью ручной настройки показателей, влияющих на него.
c) Настроить в отчёте возможность детализации (должно быть применимо для района и округа).
d) Также сделать всплывающие окна с краткой информацией по району и округу.
e) Настроить переключение между данными без загромождения отчета.</br></br>

**В ходе работы над проектом были выполнены следующие шаги:**
1. В источнике данные выбраны в качестве предполаемых мест размещения билбордов локации, г. Москвы со скомплением детей, определён идентификатор каждой локации:
   - Детские игровые площадки в парках = Идентификатор набора данных: 1389 = Площадки
   - Детские развивающие центры = Идентификатор набора данных: 905 = Кружки
   - Детские технопарки = Идентификатор набора данных: 60762 = Технопарки
   - Аттракционы в парках и на площадках = Идентификатор набора данных: 498 = Атракционы</br></br>
Идентификатор данных установленным по билбордам - 1122</br></br>
2. Подключение к источнику с данными по API-запросу из PQ с использование функции функцию Web.Contents()</br></br>
3. Загрузка данных по установленным билбордам
4. Обработка данных в PQ, разворачивание таблиц, удаление столбцов, форматирование и пр.
5. Создание переменных для автоматизации загрузки данных по выбранным идентификаторам
6. Создание функции из API-запроса
7. Вызов функции и загрузка 4-таблиц по списку выше
8. Объеденяем выгруженные таблицы в общую с помощью, используя ф-ции UNION() и SUMMARIZE()
9. Создание меры для расчёта рейтинга в связке с переключателем ЧТО-ЕСЛИ для всех таблиц отчёта: Площадки, Аттракционы, Технопарки, Кружки
10. Создание переключателя мер. Переключатель мер — это обычный фильтр и специальная мера, которая может отображать все созданные меры в одном графике. Чтобы создать переключатель мер, необходимо создать вспомогательную таблицу с помощью функции DATATABLE(). Таблица отображает количетсво по каждому параметру - Площадки, Аттракционы, Технопарки, Кружки
11. С помощью функции SWITCH создадание меру, которая будет реагировать на переключение фильтра
12. Создание переключателя столбцов. Переключатель столбцов поможет в ситуации, когда необходимо отображать на одном визуальном элементе разные категории, например уровень детализации адреса
13. Создание таблицы с динамическими параметрами, которые будут выбираться в зависимости от столбца Детализация
14. Объединение в модель данных таблицы с динамическими параметрами и общей таблицы через создание колонки индексов в каждой в качестве ключа
15. Создание визуализации
    - Карта
    - Детализация
    - Подсказка</br></br>

**Лист "Карта"**
      </br></br>
![#Кейс_4](https://github.com/ElenaTratsevskaya/DA-Power-BI-project_Creation-of-a-strategic-map-on-API-requests-data/assets/110056199/bcf6e8b7-071c-4001-b69f-cd5c4279234a)


</br></br>

**Лист "Детализация"**
</br></br>
![#Кейс_4_Детализация(2)](https://github.com/ElenaTratsevskaya/DA-Power-BI-project_Creation-of-a-strategic-map-on-API-requests-data/assets/110056199/776c43c2-2a22-49bf-a87e-e4cc8aa4fee3)
   
</br></br>

![#Кейс_4_подсказки](https://github.com/ElenaTratsevskaya/DA-Power-BI-project_Creation-of-a-strategic-map-on-API-requests-data/assets/110056199/489b0170-f0e1-4285-a2db-6dcc7e6443c4)

</br></br></br></br>
![Кейс_4](https://github.com/ElenaTratsevskaya/DA-Power-BI-project_Creation-of-a-strategic-map-on-API-requests-data/assets/110056199/91a3f4d1-d9f0-4b16-9acc-b7824bba4ae9)



